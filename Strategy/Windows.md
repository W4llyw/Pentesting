## Enumeration

### Initial Discovery
Perform NMAP scans

[Autorecon](https://github.com/Tib3rius/AutoRecon) is also an amazing tool but should scan with NMAP first to get open ports then use autorecon specifying the open ports.

### Check SMB for shares 
**NMAP:**

`nmap --script smb-enum-shares.nse -p445 <ip>`

### Discover Users
**CrackMapExec:**

`crackmapexec smb <ip or ip/cidr> -u <username> -p <password> --rid-brute`

**Impacket:**

`impacket-lookupsid <domain>/<user>@<ip>`

## Testing Users 
**Impacket:**

*--ASREP-Roasting--*

If kerberos is being used and you have a username list this will see if any of the users are asrep-roastable. GetNPUsers will list and get TGTs for users that have the "Do not require Kerberos preauthentication" set.

`impacket-GetNPUsers <domain>/ -no-pass -usersfile <userslistfile>`

Get Service Principle Names, these accounts can give you the TGS as they are used by Kerberos to associate a service with a service logon account.

*--creds needed--*

`impacket-GetUserSPNs <domain_name>/<domain_user>:<password> -outputfile <filename>`
